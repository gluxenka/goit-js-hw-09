{"version":3,"file":"2-form.js","sources":["../src/js/2-form.js"],"sourcesContent":["const defaultFormData = { email: '', message: '' };\nconst requiredMessage = 'Fill please all fields';\nconst storageKey = 'feedback-form-state';\n\nconst formElement = document.querySelector('.feedback-form');\nconst emailElement = document.querySelector('.feedback-form [name=\"email\"]');\nconst messageElement = document.querySelector(\n  '.feedback-form [name=\"message\"]'\n);\n\nconst formData = loadFromLocalStorage({ ...defaultFormData });\n\nfunction saveToLocalStorage(value) {\n  localStorage.setItem(storageKey, JSON.stringify(value));\n}\n\nfunction initFormFields(formValues) {\n  emailElement.value = formValues.email;\n  messageElement.value = formValues.message;\n}\n\nfunction loadFromLocalStorage(defaultFormData) {\n  let loadedFormValues = {};\n  try {\n    const savedFormData = JSON.parse(localStorage.getItem(storageKey));\n\n    loadedFormValues.email = (savedFormData.email ?? defaultFormData.email)\n      .toString()\n      .trim();\n    loadedFormValues.message = (\n      savedFormData.message ?? defaultFormData.message\n    )\n      .toString()\n      .trim();\n  } catch (e) {\n    // pass\n    loadedFormValues = { ...defaultFormData };\n  }\n\n  return loadedFormValues;\n}\n\nconst clearLocalStorage = () => localStorage.removeItem(storageKey);\n\nconst isFormValid = value => !!value.email && !!value.message;\n\nconst submitForm = event => {\n  event.preventDefault();\n  if (!isFormValid(formData)) {\n    alert(requiredMessage);\n    return;\n  }\n  console.log(formData);\n  clearLocalStorage();\n  formElement.reset();\n  formData.email = defaultFormData.email;\n  formData.message = defaultFormData.message;\n};\n\nconst saveInputsValues = event => {\n  const targetElement = event.target;\n  const filedName = targetElement.name;\n  if (!['email', 'message'].includes(filedName)) {\n    return;\n  }\n\n  formData[filedName] = targetElement.value.trim();\n\n  saveToLocalStorage(formData);\n};\n\ninitFormFields(formData);\nformElement.addEventListener('input', saveInputsValues);\nformElement.addEventListener('submit', submitForm);\n"],"names":["defaultFormData","requiredMessage","storageKey","formElement","emailElement","messageElement","formData","loadFromLocalStorage","saveToLocalStorage","value","initFormFields","formValues","loadedFormValues","savedFormData","clearLocalStorage","isFormValid","submitForm","event","saveInputsValues","targetElement","filedName"],"mappings":"oCAAA,MAAMA,EAAkB,CAAE,MAAO,GAAI,QAAS,EAAE,EAC1CC,EAAkB,yBAClBC,EAAa,sBAEbC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAe,SAAS,cAAc,+BAA+B,EACrEC,EAAiB,SAAS,cAC9B,iCACF,EAEMC,EAAWC,EAAqB,CAAE,GAAGP,CAAiB,CAAA,EAE5D,SAASQ,EAAmBC,EAAO,CACjC,aAAa,QAAQP,EAAY,KAAK,UAAUO,CAAK,CAAC,CACxD,CAEA,SAASC,EAAeC,EAAY,CAClCP,EAAa,MAAQO,EAAW,MAChCN,EAAe,MAAQM,EAAW,OACpC,CAEA,SAASJ,EAAqBP,EAAiB,CAC7C,IAAIY,EAAmB,CAAA,EACvB,GAAI,CACF,MAAMC,EAAgB,KAAK,MAAM,aAAa,QAAQX,CAAU,CAAC,EAEjEU,EAAiB,OAASC,EAAc,OAASb,EAAgB,OAC9D,SAAU,EACV,OACHY,EAAiB,SACfC,EAAc,SAAWb,EAAgB,SAExC,SAAU,EACV,MACJ,MAAW,CAEVY,EAAmB,CAAE,GAAGZ,EACzB,CAED,OAAOY,CACT,CAEA,MAAME,EAAoB,IAAM,aAAa,WAAWZ,CAAU,EAE5Da,EAAcN,GAAS,CAAC,CAACA,EAAM,OAAS,CAAC,CAACA,EAAM,QAEhDO,EAAaC,GAAS,CAE1B,GADAA,EAAM,eAAc,EAChB,CAACF,EAAYT,CAAQ,EAAG,CAC1B,MAAML,CAAe,EACrB,MACD,CACD,QAAQ,IAAIK,CAAQ,EACpBQ,IACAX,EAAY,MAAK,EACjBG,EAAS,MAAQN,EAAgB,MACjCM,EAAS,QAAUN,EAAgB,OACrC,EAEMkB,EAAmBD,GAAS,CAChC,MAAME,EAAgBF,EAAM,OACtBG,EAAYD,EAAc,KAC3B,CAAC,QAAS,SAAS,EAAE,SAASC,CAAS,IAI5Cd,EAASc,CAAS,EAAID,EAAc,MAAM,KAAI,EAE9CX,EAAmBF,CAAQ,EAC7B,EAEAI,EAAeJ,CAAQ,EACvBH,EAAY,iBAAiB,QAASe,CAAgB,EACtDf,EAAY,iBAAiB,SAAUa,CAAU"}